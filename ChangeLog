2010-07-23  Wolfgang Sourdeau  <wsourdeau@inverse.ca>

	* src/calendar/lightning/content/imip-bar.js: (setupMsgIdentities)
	added missing method.

	* src/calendar/base/content/calendar-view-core.xml:
	(calendar-editable-item.handlers.draggesture): same as below.

	* src/calendar/base/content/calendar-multiday-view.xml:
	(calendar-event-column.startSweepingToModifyEvent): return if the
	current item is an invitation.

	* src/calendar/lightning/content/lightning-utils.js:
	(ltnInitMailIdentitiesRow): take the identities from the acl entry
	corresponding to the current calendar if the latter is of type
	"caldav".

	* src/calendar/base/content/dialogs/calendar-event-dialog.js:
	(updateCalendar) access to cached/uncached calendars must be done
	via the wrappedCalendar object.

	* src/calendar/base/content/calendar-item-editing.js:
	(openEventDialog) restored the "initialDate" parameter.
	Consequently, restored the initialStartDateValue argument for the
	editing window. Also, restored the "onNewTodo" argument.

2010-07-22  Wolfgang Sourdeau  <wsourdeau@inverse.ca>

	* src/calendar/base/content/calendar-common-sets.js,
	src/calendar/base/content/calendar-unifinder.js,
	src/calendar/base/content/widgets/calendar-list-tree.xml: migrated
	ACL code from SOGo Connector for handling the "calendar_new_XXX"
	and "calendar_delete_XXX" UI commands.

	* src/calendar/lightning/content/lightning-calendar-properties.js
	(onLoad): added ACL code.

	* src/calendar/base/src/calUtils.js: (isCalendarWritable) added
	code that makes use of the CalDAV ACL mgr...

	* src/calendar/base/content/dialogs/calendar-event-dialog.js:
	(updateCalendar): added code to load the acl entry for the
	calendar item being editted, from sogo-connector acl code.
	(saveItem): check whether the item is its own parent in order to
	decide whether to set the item's organizer or not.

	* src/calendar/base/content/calendar-ui-utils.js:
	(appendCalendarItems) added code to check whether the list of
	calendars only includes calendars where the user can add events,
	from sogo-connector acl code.

	* src/calendar/acl/caldav-acl-manager/CalDAVACLManager.js:
	migrated from sogo-connector.

2010-07-21  Wolfgang Sourdeau  <wsourdeau@inverse.ca>

	* src/calendar/providers/caldav/calDavCalendar.js: (getProperty):
	fixed a crash by returning the first owner's identity rather than
	a copy of it when "imip.identity" is queried.
	(*) "lettified" the whole module.

